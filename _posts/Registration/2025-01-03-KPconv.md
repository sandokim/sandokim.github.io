---
title: "[Registration] Kernel Point Convolution (KPConv)"
last_modified_at: 2025-01-03
categories:
  - Registration
tags:
  - Registration
  - 정합
  - point cloud 
  - KPConv
  - 3D filters
excerpt: "Kernel Point Convolution (KPConv) is used to obtain the downsampled voxel points"
use_math: true
classes: wide
comments: true
---

> Reference

> [DReg-NeRF: Deep Registration for Neural Radiance Fields](https://openaccess.thecvf.com/content/ICCV2023/papers/Chen_DReg-NeRF_Deep_Registration_for_Neural_Radiance_Fields_ICCV_2023_paper.pdf)

> [KPConv: Flexible and Deformable Convolution for Point Clouds](https://openaccess.thecvf.com/content_ICCV_2019/papers/Thomas_KPConv_Flexible_and_Deformable_Convolution_for_Point_Clouds_ICCV_2019_paper.pdf)

### KPConv: Flexible and Deformable Convolution for Point Clouds

**KPConv also consists of a set of local 3D filters.**

... as done in **KPConv [36] to obtain the downsampled voxel points** $\hat{X}$. The downsample iteration is terminated when the total number of occupied voxels in the current sampled voxel feature grid is less than 1.5K.

#### 3D point cloud segmentation or 3D simultaneous localization and mapping rely on non-grid structured data: point clouds.

A point cloud is a set of points in 3D (or higher-dimensional) space.

In many applications, the points are coupled with corresponding features like colors. In this work, we will always consider a point cloud as those two elements: 

- the points $P \in R^{N \times 3}$ 
- the features $F \in R^{N \times D}$

Such **a point cloud is a _sparse_ structure** that has the property to be **_unordered_**, which makes it very different from a grid.

However, it shares a common property with a grid which is essential to the definition of convolutions: it is **_spatially localized_**.

- **In a grid**, the features **are localized by their index in a matrix**.
- **In a point cloud**, the features **are localized by their corresponding point coordinates**.

Thus, the points are to be considered as structural elements, and the features as the real data.

### Image convolution과 KPConv 차이

![image](https://github.com/user-attachments/assets/c8c369e8-1347-40c4-ae68-9936c7387c0c)

KPConv에서는 입력 점들이 커널 점들과 정렬되지 않으며, 점의 수가 가변적입니다. 

따라서, 각 점의 특성 $f_i$는 모든 커널 가중치 행렬과 곱해지며, 커널 점에 대한 상대적인 위치에 따라 결정되는 상관 계수 $h_{ik}$ 를 적용받습니다.

### Kernel Point Network Layers

다중 레이어 스케일 구조를 만들기 위해 점의 수를 점진적으로 줄여야 하며, 이를 위해 그리드 서브샘플링을 사용합니다. 각 풀링 레이어에서는 셀 크기를 두 배로 늘리면서 receptive field을 확장합니다.
새로운 위치에서 풀링된 특징은 최대 풀링(max-pooling)이나 **KPConv로 얻을 수 있으며, 여기서는 "strided KPConv" 방식을 사용합니다. 이는 이미지의 스트라이드 컨볼루션과 유사한 개념입니다.**
